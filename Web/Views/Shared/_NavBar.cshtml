<nav x-data="{ mobileMenuIsOpen: false }"
     x-on:click.away="mobileMenuIsOpen = false"
     class="flex flex-wrap items-center justify-between border-b border-outline bg-surface-alt px-6 py-4 text-sm dark:border-outline-dark dark:bg-surface-dark-alt"
     aria-label="Main navigation">

    <!-- Brand -->
    <a href="/" class="text-2xl font-bold text-on-surface-strong dark:text-on-surface-dark-strong">
        Library<span class="text-primary dark:text-primary-dark">Sys</span>
    </a>

    <!-- Desktop Menu -->
    <ul class="hidden gap-4 sm:flex items-center font-medium">
        <li><a class="nav-link" asp-controller="Home" asp-action="Index">Home</a></li>
        <li><a class="nav-link" asp-controller="Book" asp-action="Index">Books</a></li>
        <li><a class="nav-link" asp-controller="Category" asp-action="Index">Categories</a></li>

        @if (User.IsInRole("Member"))
        {
            <li><a class="nav-link" asp-controller="Reservation" asp-action="MyReservations">Reservation</a></li>
            <li><a class="nav-link" asp-controller="Loan" asp-action="MyLoans">Loan</a></li>
        }

        @if (User.IsInRole("Admin") || User.IsInRole("Librarian"))
        {
            <li><a class="nav-link" asp-controller="Reservation" asp-action="Index">Reservation</a></li>
            <li><a class="nav-link" asp-controller="User" asp-action="Index">User</a></li>
            <li><a class="nav-link" asp-controller="Profile" asp-action="Index">Profile</a></li>
            <li><a class="nav-link" asp-controller="Reports" asp-action="Index">Reports</a></li>
            <li><a class="nav-link" asp-controller="Loan" asp-action="Index">Loan</a></li>
            <li><a class="nav-link" asp-controller="Fine" asp-action="FinesReport">Fines</a></li>
        }

        <li>
            <form asp-action="Logout" asp-controller="Auth" method="post">
                <button type="submit" class="nav-link">Logout</button>
            </form>
        </li>
        <li>
            <form asp-action="Login" asp-controller="Auth" method="post">
                <button type="submit" class="nav-link">Login</button>
            </form>
        </li>
    </ul>

    <!-- Mobile Menu Toggle -->
    <button x-on:click="mobileMenuIsOpen = !mobileMenuIsOpen"
            class="sm:hidden text-on-surface dark:text-on-surface-dark focus:outline-none"
            aria-label="Toggle mobile menu">
        <svg x-show="!mobileMenuIsOpen" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
             stroke="currentColor" stroke-width="2" class="w-6 h-6">
            <path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 12h16M4 18h16" />
        </svg>
        <svg x-show="mobileMenuIsOpen" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
             stroke="currentColor" stroke-width="2" class="w-6 h-6">
            <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
        </svg>
    </button>

    <!-- Mobile Menu Dropdown -->
    <div x-show="mobileMenuIsOpen"
         x-cloak
         class="w-full mt-4 flex flex-col gap-2 sm:hidden"
         x-transition>
        <a class="nav-link" asp-controller="Home" asp-action="Index">Home</a>
        <a class="nav-link" asp-controller="Book" asp-action="Index">Books</a>
        <a class="nav-link" asp-controller="Category" asp-action="Index">Categories</a>

        @if (User.IsInRole("Member"))
        {
            <a class="nav-link" asp-controller="Reservation" asp-action="MyReservations">Reservation</a>
            <a class="nav-link" asp-controller="Loan" asp-action="MyLoans">Loan</a>
        }

        @if (User.IsInRole("Admin") || User.IsInRole("Librarian"))
        {
            <a class="nav-link" asp-controller="Reservation" asp-action="Index">Reservation</a>
            <a class="nav-link" asp-controller="User" asp-action="Index">User</a>
            <a class="nav-link" asp-controller="Profile" asp-action="Index">Profile</a>
            <a class="nav-link" asp-controller="Reports" asp-action="Index">Reports</a>
            <a class="nav-link" asp-controller="Loan" asp-action="Index">Loan</a>
        }

        <form asp-action="Logout" asp-controller="Auth" method="post">
            <button type="submit" class="nav-link text-left w-full">Logout</button>
        </form>
        <form asp-action="Login" asp-controller="Auth" method="post">
            <button type="submit" class="nav-link text-left w-full">Login</button>
        </form>
    </div>
</nav>